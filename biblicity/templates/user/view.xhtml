{% extends "../layout.xhtml" %}
{% block title %}{{user.name}} — {{c.config.Site.name}}{% end block %}
{% block main %}
<h1>{{user.name}}
	{% if user.email == c.session.get('email') %}
	<a class="fa fa-pencil editing_icon" href="{{c.config.Site.url}}/user/{{user.id}}/edit" title="Edit Profile"></a>
	{% elif user.email in [o.email for o in c.user.following] %}
	<a class="fa fa-user editing_icon" href="{{c.config.Site.url}}/user/{{user.id}}/unfollow" title="Unfollow User"><strong>–</strong></a>
	{% elif user.email not in [o.email for o in c.user.blocking] %}
	<a class="fa fa-user-plus editing_icon" href="{{c.config.Site.url}}/user/{{user.id}}/follow" title="Follow User"></a>
	<a class="fa fa-user-times editing_icon" href="{{c.config.Site.url}}/user/{{user.id}}/block" title="Block User"></a>
	{% else %}
	<a class="fa fa-user editing_icon" href="{{c.config.Site.url}}/user/{{user.id}}/unblock" title="Unblock User"></a>
	{% end if %}
</h1>
<p>{{user.bio}}</p>
{% if len(user.items()) > 0 %}
<h2>Recent Items</h2>
{% end if %}
{% set previous = [] %}
{% for item in user.items() %}
{% if item.id not in previous %}
<p>
	<strong><a href="{{c.config.Site.url}}/items/{{item.id_slash_title}}">{{item.title_with_bref or ''}}</a></strong> 
	(<em>{{str(item.created).split(' ')[0]}}</em>)
</p>
{% end if %}
{% set previous = previous + [item.previous_id] %}
{% end for %}
</table>
{% end block %}